<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staking Rewards Sustainability Model</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            color: #2d3748;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
            font-weight: 700;
        }
        
        .section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid #4299e1;
        }
        
        .section h2 {
            color: #2d3748;
            margin-top: 0;
            font-size: 1.4em;
            font-weight: 600;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 8px;
        }
        
        input {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s;
            font-family: 'Courier New', monospace;
        }
        
        input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .metric-label {
            color: #718096;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .sustainability-indicator {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
            margin: 20px 0;
        }
        
        .sustainable {
            background: #c6f6d5;
            color: #22543d;
            border: 2px solid #68d391;
        }
        
        .unsustainable {
            background: #fed7d7;
            color: #822727;
            border: 2px solid #fc8181;
        }
        
        .warning {
            background: #fefcbf;
            color: #744210;
            border: 2px solid #f6e05e;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        
        th {
            background: #4299e1;
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f7fafc;
        }
        
        .year-highlight {
            background: #fff5f5 !important;
            color: #c53030;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .results-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 Staking Rewards Sustainability Model</h1>
        
        <div class="section">
            <h2>📊 Input Parameters</h2>
            <div class="input-grid">
                <div class="input-group">
                    <label for="totalSupply">Total Token Supply</label>
                    <input type="text" id="totalSupply" value="10,000,000,000">
                </div>
                <div class="input-group">
                    <label for="remainingPercent">Remaining Supply (%)</label>
                    <input type="number" id="remainingPercent" value="20" step="0.1" min="0" max="100">
                </div>
                <div class="input-group">
                    <label for="stakingAPY">Target Staking APY (%)</label>
                    <input type="number" id="stakingAPY" value="5" step="0.1" min="0">
                </div>
                <div class="input-group">
                    <label for="stakingRate">Network Staking Rate (%)</label>
                    <input type="number" id="stakingRate" value="40" step="0.1" min="0" max="100">
                </div>
                <div class="input-group">
                    <label for="circulatingSupply">Circulating Supply</label>
                    <input type="text" id="circulatingSupply" value="8,000,000,000">
                </div>
                <div class="input-group">
                    <label for="projectionYears">Projection Years</label>
                    <input type="number" id="projectionYears" value="10" step="1" min="1" max="20">
                </div>
            </div>
        </div>

        <div class="section">
            <h2>📈 Key Metrics</h2>
            <div class="results-grid">
                <div class="metric-card">
                    <div class="metric-value" id="remainingTokens">2.00B</div>
                    <div class="metric-label">Remaining Tokens</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="stakedTokens">3.20B</div>
                    <div class="metric-label">Tokens Staked</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="annualRewards">160M</div>
                    <div class="metric-label">Annual Rewards Needed</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="yearsRemaining">12.5</div>
                    <div class="metric-label">Years Until Depletion</div>
                </div>
            </div>
            
            <div id="sustainabilityIndicator" class="sustainability-indicator sustainable">
                ✅ SUSTAINABLE: Remaining tokens can support rewards for the projection period
            </div>
        </div>

        <div class="section">
            <h2>📅 Year-by-Year Projection</h2>
            <table id="projectionTable">
                <thead>
                    <tr>
                        <th>Year</th>
                        <th>Circulating Supply</th>
                        <th>Tokens Staked</th>
                        <th>Rewards Paid</th>
                        <th>Remaining Reserve</th>
                        <th>Reserve %</th>
                    </tr>
                </thead>
                <tbody id="projectionBody">
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>💡 Analysis & Recommendations</h2>
            <div id="analysis">
                <p><strong>Current Analysis:</strong> Based on your parameters, the staking rewards system appears sustainable for the projection period.</p>
            </div>
        </div>
    </div>

    <script>
        function formatNumber(num) {
            if (num >= 1e9) {
                return (num / 1e9).toFixed(2) + 'B';
            } else if (num >= 1e6) {
                return (num / 1e6).toFixed(1) + 'M';
            } else if (num >= 1e3) {
                return (num / 1e3).toFixed(1) + 'K';
            }
            return num.toLocaleString();
        }

        function formatLargeNumber(num) {
            return num.toLocaleString();
        }

        function formatPercent(num) {
            return num.toFixed(2) + '%';
        }

        function calculateModel() {
            const totalSupply = parseFloat(document.getElementById('totalSupply').value.replace(/,/g, ''));
            const remainingPercent = parseFloat(document.getElementById('remainingPercent').value);
            const stakingAPY = parseFloat(document.getElementById('stakingAPY').value);
            const stakingRate = parseFloat(document.getElementById('stakingRate').value);
            const circulatingSupply = parseFloat(document.getElementById('circulatingSupply').value.replace(/,/g, ''));
            const projectionYears = parseInt(document.getElementById('projectionYears').value);

            const remainingTokens = totalSupply * (remainingPercent / 100);
            const stakedTokens = circulatingSupply * (stakingRate / 100);
            const annualRewards = stakedTokens * (stakingAPY / 100);
            const yearsUntilDepletion = remainingTokens / annualRewards;

            // Update key metrics
            document.getElementById('remainingTokens').textContent = formatNumber(remainingTokens);
            document.getElementById('stakedTokens').textContent = formatNumber(stakedTokens);
            document.getElementById('annualRewards').textContent = formatNumber(annualRewards);
            document.getElementById('yearsRemaining').textContent = yearsUntilDepletion.toFixed(1);

            // Update sustainability indicator
            const indicator = document.getElementById('sustainabilityIndicator');
            if (yearsUntilDepletion >= projectionYears) {
                indicator.className = 'sustainability-indicator sustainable';
                indicator.innerHTML = '✅ SUSTAINABLE: Remaining tokens can support rewards for the projection period';
            } else if (yearsUntilDepletion >= projectionYears * 0.8) {
                indicator.className = 'sustainability-indicator warning';
                indicator.innerHTML = '⚠️ WARNING: Rewards may run low towards the end of projection period';
            } else {
                indicator.className = 'sustainability-indicator unsustainable';
                indicator.innerHTML = '❌ UNSUSTAINABLE: Rewards will be depleted before projection period ends';
            }

            // Generate year-by-year projection
            const tbody = document.getElementById('projectionBody');
            tbody.innerHTML = '';

            let currentCirculating = circulatingSupply;
            let currentRemaining = remainingTokens;

            for (let year = 1; year <= projectionYears; year++) {
                const yearStaked = currentCirculating * (stakingRate / 100);
                const yearRewards = yearStaked * (stakingAPY / 100);
                
                const row = document.createElement('tr');
                if (currentRemaining <= 0) {
                    row.className = 'year-highlight';
                }

                row.innerHTML = `
                    <td>Year ${year}</td>
                    <td>${formatLargeNumber(currentCirculating)}</td>
                    <td>${formatLargeNumber(yearStaked)}</td>
                    <td>${formatLargeNumber(yearRewards)}</td>
                    <td>${formatLargeNumber(Math.max(0, currentRemaining))}</td>
                    <td>${formatPercent((Math.max(0, currentRemaining) / totalSupply) * 100)}</td>
                `;
                tbody.appendChild(row);

                // Update for next year
                currentCirculating += yearRewards; // New tokens enter circulation
                currentRemaining -= yearRewards;   // Deducted from reserve
            }

            // Update analysis
            updateAnalysis(yearsUntilDepletion, projectionYears, annualRewards, remainingTokens, stakingAPY, stakingRate);
        }

        function updateAnalysis(yearsUntilDepletion, projectionYears, annualRewards, remainingTokens, stakingAPY, stakingRate) {
            const analysisDiv = document.getElementById('analysis');
            let analysis = '<p><strong>Current Analysis:</strong> ';

            if (yearsUntilDepletion >= projectionYears) {
                analysis += `The staking rewards system is <strong>sustainable</strong> for ${projectionYears} years. `;
                analysis += `At current parameters, rewards will last ${yearsUntilDepletion.toFixed(1)} years. `;
            } else {
                analysis += `The system is <strong>not sustainable</strong> at current parameters. `;
                analysis += `Rewards will be depleted after ${yearsUntilDepletion.toFixed(1)} years. `;
            }

            analysis += '</p><p><strong>Recommendations:</strong></p><ul>';

            if (yearsUntilDepletion < projectionYears) {
                analysis += '<li><strong>Reduce APY:</strong> Consider lowering staking rewards from ' + stakingAPY + '% to ' + (stakingAPY * (yearsUntilDepletion / projectionYears)).toFixed(1) + '% to extend sustainability</li>';
                analysis += '<li><strong>Implement Dynamic Rewards:</strong> Use a decreasing reward schedule over time</li>';
                analysis += '<li><strong>Fee Integration:</strong> Supplement rewards with network transaction fees</li>';
            }

            if (stakingRate < 30) {
                analysis += '<li><strong>Increase Participation:</strong> Current staking rate is low. Consider incentivizing more participation</li>';
            }

            if (yearsUntilDepletion > projectionYears * 1.5) {
                analysis += '<li><strong>Optimize Allocation:</strong> Consider reallocating some reserve tokens for ecosystem development</li>';
            }

            analysis += '<li><strong>Monitor & Adjust:</strong> Regularly review and adjust parameters based on network growth and participation</li>';
            analysis += '</ul>';

            analysisDiv.innerHTML = analysis;
        }

        // Add event listeners to all inputs
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', function() {
                // Format number inputs with commas as user types
                if (this.type === 'number' && (this.id === 'totalSupply' || this.id === 'circulatingSupply')) {
                    let value = this.value.replace(/,/g, '');
                    if (!isNaN(value) && value !== '') {
                        this.value = parseFloat(value).toLocaleString();
                    }
                }
                calculateModel();
            });
            
            input.addEventListener('focus', function() {
                // Remove commas when focusing for easier editing
                if (this.type === 'number' && (this.id === 'totalSupply' || this.id === 'circulatingSupply')) {
                    this.value = this.value.replace(/,/g, '');
                }
            });
            
            input.addEventListener('blur', function() {
                // Add commas back when leaving field
                if (this.type === 'number' && (this.id === 'totalSupply' || this.id === 'circulatingSupply')) {
                    let value = this.value.replace(/,/g, '');
                    if (!isNaN(value) && value !== '') {
                        this.value = parseFloat(value).toLocaleString();
                    }
                }
            });
        });

        // Initial calculation and formatting
        document.addEventListener('DOMContentLoaded', function() {
            // Format initial values
            document.getElementById('totalSupply').value = '10,000,000,000';
            document.getElementById('circulatingSupply').value = '8,000,000,000';
            calculateModel();
        });
    </script>
</body>
</html>
